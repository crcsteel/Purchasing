<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>

	<title>Inventory Report</title>
  	<link rel="icon" href="img/CRC_LogoEN.jpg" type="image/jpeg">
<link rel="stylesheet" href="/steel-dashboard/css/style.css">
</head>
<body>	
	<!-- SIDEBAR -->
    <div id="sidebar"><p>⏳ Loading sidebar...</p></div>
	<!-- SIDEBAR -->

	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<form action="#">
				<div class="form-group">
					<h1 class="title">Inventory Report</h1>
				</div>
			</form>
			<span class="divider"></span>
			<div class="profile">
				<img src="https://crcsteel.co.th/upload-img/CRC_steel/logo_CRC_vdo-01_1665974907.png" alt="Logo">
			</div>
			<!-- ปุ่ม toggle sidebar -->
			<div class="toggle-sidebar"><i class='bx bx-menu'></i></div>
		</nav>

		<!-- MAIN -->
		<main>
			<ul class="breadcrumbs">
				<li><a href="#">Home</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Dashboard</a></li>
			</ul>

			<div class="data">
				<div class="content-data">
					<div class="head"><h3>มูลค่าสต๊อกคงคลัง (ล้านบาท)</h3></div>
					<div class="chart" id="inventory-chart"></div>
				</div>
				<div class="content-data">
					<div class="head"><h3>มูลค่าการสั่งซื้อ (ล้านบาท)</h3></div>
					<div class="chart" id="po-chart"></div>
				</div>
			</div>

			<div class="data">
				<div class="content-data">
					<div class="head"><h3>สต๊อกคงคลัง (ตัน)</h3></div>
					<div class="chart" id="group-bar-chart"></div>
				</div>
			</div>

      		<div class="data">
        		<div class="content-data">
          			<div class="head"><h3>สต๊อกคงคลัง (มูลค่า/บาท)</h3></div>
          			<div class="stock-data">
            			<table id="table-stock-value"></table>
          			</div>
        		</div>

        		<div class="content-data">
          			<div class="head"><h3>สต๊อกคงคลัง (น้ำหนัก/ตัน)</h3></div>
          			<div class="stock-data">
            			<table id="table-stock-weight"></table>
          			</div>
        		</div>

        		<div class="content-data">
          			<div class="head"><h3>สต๊อกค้างรับ (มูลค่า/บาท)</h3></div>
          			<div class="stock-data">
            			<table id="table-stock-pending"></table>
          			</div>
        		</div>
      		</div>

			<div class="data">
        		<div class="content-data">
          			<div class="head"><h3>เบทราคา (บาท/กก.)</h3></div>
          			<div class="stock-data">
            			<table id="table-base-price"></table>
          			</div>
        		</div>

				<div class="content-data">
					<div class="head"><h3>สต๊อกคงคลัง (น้ำหนัก/ตัน)</h3></div>
					<div class="chart" id="stock-chart"></div>
				</div>
			</div>
		</main>
	</section>

<!-- JavaScript -->
<script src="/steel-dashboard/script/script.js"></script>
<script src="/steel-dashboard/script/base.js"></script>
<script src="/steel-dashboard/script/inventory.js"></script>
<script src="/steel-dashboard/script/inventoryout.js"></script>
<script src="/steel-dashboard/script/salesandbase.js"></script>
<script src="/steel-dashboard/script/salesdaily.js"></script>

  	<script>    
    	document.addEventListener("DOMContentLoaded", () => {
      		// โหลด sidebar.html ก่อน
      		fetch('page/sidebar.html')
        		.then(res => res.text())
        		.then(html => {
          			document.getElementById('sidebar').innerHTML = html;
          			initSidebar(); 
        		})
        		.catch(err => console.error('โหลด Sidebar ไม่ได้:', err));
    	});

    	function initSidebar() {
      		const allDropdown = document.querySelectorAll('#sidebar .side-dropdown');
      		const sidebar = document.getElementById('sidebar');
      		const toggleSidebar = document.querySelector('nav .toggle-sidebar');
      		const allSideDivider = document.querySelectorAll('#sidebar .divider');

      		// ===== Dropdown =====
      		allDropdown.forEach(item => {
        		const a = item.parentElement.querySelector('a:first-child');
        		a.addEventListener('click', function (e) {
          			e.preventDefault();
          			if (!this.classList.contains('active')) {
            			allDropdown.forEach(i => {
              				const aLink = i.parentElement.querySelector('a:first-child');
              				aLink.classList.remove('active');
              				i.classList.remove('show');
            			});
          			}
          			this.classList.toggle('active');
          			item.classList.toggle('show');
        		});
      		});

      		// ===== Collapse =====
      		if (sidebar.classList.contains('hide')) {
        		allSideDivider.forEach(item => item.textContent = '-');
      		} else {
        		allSideDivider.forEach(item => item.textContent = item.dataset.text);
      		}

      		if (toggleSidebar) {
        		toggleSidebar.addEventListener('click', function () {
          			sidebar.classList.toggle('hide');
          			if (sidebar.classList.contains('hide')) {
            			allSideDivider.forEach(item => item.textContent = '-');
            			allDropdown.forEach(item => {
              				const a = item.parentElement.querySelector('a:first-child');
              				a.classList.remove('active');
              				item.classList.remove('show');
            			});
          			} else {
            			allSideDivider.forEach(item => item.textContent = item.dataset.text);
          			}
        		});
      		}

      		// Hover event
      		sidebar.addEventListener('mouseleave', function () {
        		if (this.classList.contains('hide')) {
          			allSideDivider.forEach(item => item.textContent = '-');
        		}
      		});
      		sidebar.addEventListener('mouseenter', function () {
        		if (this.classList.contains('hide')) {
          			allSideDivider.forEach(item => item.textContent = item.dataset.text);
        		}
      		});
    	}
  	</script>
</body>
</html>
